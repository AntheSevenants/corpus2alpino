sudo: required
language: python
services:
  - docker
before_install:
  - tar -cvf files.tar *
  - docker pull proycon/lamachine
  - docker run -t -d --name lamachine proycon/lamachine
  - docker cp files.tar lamachine:/tmp/
  - docker exec lamachine tar -xf /tmp/files.tar -C /tmp
install:
  # needed for nltk
  - docker exec lamachine sudo pip3 install singledispatch
  - docker exec lamachine sudo pip3 install -r /tmp/requirements.txt
before_script:
  - docker exec lamachine env LANG=C.UTF-8
script:
  - docker exec lamachine python3 -m unittest
  - docker stop lamachine
  - mypy **/*.py --ignore-missing-imports
